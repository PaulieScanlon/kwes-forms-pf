---
import Main from '../layouts/main.astro';

const response = await fetch('https://kwes.io/api/v1/forms/XRrkzNJYBCCtapiFhR3g/submissions?mode=development', {
  method: 'GET',
  headers: {
    Accept: 'application/json',
    'Content-Type': 'application/json',
    Authorization: 'Bearer gwEvpqTVnGDA4s5vOHeIAcOxSO566jXZ5EPjfFjWWuXThX61CHlg5I8J4Wwt',
  },
  redirect: 'follow',
});

const data = await response.json();
---

<Main>
  <h1>Skills</h1>
  <form class='kwes-form' no-reload action='https://kwesforms.com/api/foreign/forms/XRrkzNJYBCCtapiFhR3g'>
    <label for='name'>Your Name</label>
    <input type='text' name='name' rules='required|max:255' />
    <fieldset repeater name='unique_name'>
      <div repeater-group>
        <label for='Language'>Language or Technology</label>
        <input type='text' name='Language' rules='required|max:255' />
        <fieldset data-kw-group rules='required'>
          <input type='checkbox' name='skill-level' value='Novice' /> Novice
          <input type='checkbox' name='skill-level' value='Intermediate' /> Intermediate
          <input type='checkbox' name='skill-level' value='Proficient' /> Proficient
          <input type='checkbox' name='skill-level' value='Expert' /> Expert
        </fieldset>
      </div>
    </fieldset>
    <button type='submit'>Submit</button>
  </form>
  <pre>{JSON.stringify(data, null, 2)}</pre>
</Main>
